<HTML>

<!-- Generated by c2html-1.0, Copyright 1998 by Dave Whittington -->
<HEAD>
<TITLE>capi.h</TITLE>
<!--#include virtual="/ssi/js.shtml" -->
<!--#include virtual="/ssi/buttondefs.shtml" -->
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE WIDTH="100%">
<TR>
<TD ALIGN=LEFT WIDTH="90"><!--#include virtual="/ssi/b_home.shtml" --></TD>
<TD ALIGN=RIGHT WIDTH="90"><!--#include virtual="/ssi/b_up.shtml" --></TD>
</TR>
</TABLE>
<CENTER><H1>capi.h</H1></CENTER>

<HR>
<PRE>
<FONT COLOR=#0000FF>/*
 * $Id$
 * 
 * CAPI 2.0 Interface for Linux
 * 
 * Copyright 1997 by Carsten Paeth (calle@calle.in-berlin.de)
 * 
 * $Log$
 * Revision 1.1  1997/03/04 21:27:33  calle
 * First version in isdn4linux
 *
 * Revision 2.2  1997/02/12 09:31:39  calle
 * new version
 *
 * Revision 1.1  1997/01/31 10:32:20  calle
 * Initial revision
 *
 * 
 */</FONT>

<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#__LINUX_CAPI_H__">__LINUX_CAPI_H__</A>
<FONT COLOR=#A521F7>#define</FONT> <A NAME="__LINUX_CAPI_H__">__LINUX_CAPI_H__</A>

<FONT COLOR=#A521F7>#include</FONT> &lt;<FONT COLOR="#298C52">asm</FONT>/types.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/ioctl.h&gt;
<FONT COLOR=#A521F7>#ifndef</FONT> __KERNEL__
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/kernelcapi.h&gt;
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#0000FF>/*
 * CAPI_REGISTER
 */</FONT>

<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">struct</FONT> <A NAME="capi_register_params">capi_register_params</A> {	<FONT COLOR=#0000FF>/* CAPI_REGISTER */</FONT>
	__u32 level3cnt;	<FONT COLOR=#0000FF>/* No. of simulatneous user data connections */</FONT>
	__u32 datablkcnt;	<FONT COLOR=#0000FF>/* No. of buffered data messages */</FONT>
	__u32 datablklen;	<FONT COLOR=#0000FF>/* Size of buffered data messages */</FONT>
} <A HREF="#capi_register_params">capi_register_params</A>;

<FONT COLOR=#A521F7>#define</FONT>	<A NAME="CAPI_REGISTER">CAPI_REGISTER</A>	_IOW(<FONT COLOR="#FF0000">'C'</FONT>,0x01,<FONT COLOR="#298C52">struct</FONT> <A HREF="#capi_register_params">capi_register_params</A>)

<FONT COLOR=#0000FF>/*
 * CAPI_GET_MANUFACTURER
 */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_MANUFACTURER_LEN">CAPI_MANUFACTURER_LEN</A>		64

<FONT COLOR=#A521F7>#define</FONT>	<A NAME="CAPI_GET_MANUFACTURER">CAPI_GET_MANUFACTURER</A>	_IOWR(<FONT COLOR="#FF0000">'C'</FONT>,0x06,<A HREF="#CAPI_MANUFACTURER_LEN">CAPI_MANUFACTURER_LEN</A>)

<FONT COLOR=#0000FF>/*
 * CAPI_GET_VERSION
 */</FONT>

<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">struct</FONT> <A NAME="capi_version">capi_version</A> {
	__u32 majorversion;
	__u32 minorversion;
	__u32 majormanuversion;
	__u32 minormanuversion;
} <A HREF="#capi_version">capi_version</A>;

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_GET_VERSION">CAPI_GET_VERSION</A>	_IOWR(<FONT COLOR="#FF0000">'C'</FONT>,0x07,<FONT COLOR="#298C52">struct</FONT> <A HREF="#capi_version">capi_version</A>)

<FONT COLOR=#0000FF>/*
 * CAPI_GET_SERIAL
 */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_SERIAL_LEN">CAPI_SERIAL_LEN</A>		8
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_GET_SERIAL">CAPI_GET_SERIAL</A>		_IOWR(<FONT COLOR="#FF0000">'C'</FONT>,0x08, <A HREF="#CAPI_SERIAL_LEN">CAPI_SERIAL_LEN</A>)

<FONT COLOR=#0000FF>/*
 * CAPI_GET_PROFILE
 */</FONT>

<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">struct</FONT> <A NAME="capi_profile">capi_profile</A> {
	__u16 ncontroller;	<FONT COLOR=#0000FF>/* number of installed controller */</FONT>
	__u16 nbchannel;	<FONT COLOR=#0000FF>/* number of B-Channels */</FONT>
	__u32 goptions;		<FONT COLOR=#0000FF>/* global options */</FONT>
	__u32 support1;		<FONT COLOR=#0000FF>/* B1 protocols support */</FONT>
	__u32 support2;		<FONT COLOR=#0000FF>/* B2 protocols support */</FONT>
	__u32 support3;		<FONT COLOR=#0000FF>/* B3 protocols support */</FONT>
	__u32 reserved[6];	<FONT COLOR=#0000FF>/* reserved */</FONT>
	__u32 manu[5];		<FONT COLOR=#0000FF>/* manufacturer specific information */</FONT>
} <A HREF="#capi_profile">capi_profile</A>;

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_GET_PROFILE">CAPI_GET_PROFILE</A>	_IOWR(<FONT COLOR="#FF0000">'C'</FONT>,0x09,<FONT COLOR="#298C52">struct</FONT> <A HREF="#capi_profile">capi_profile</A>)

<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">struct</FONT> <A NAME="capi_manufacturer_cmd">capi_manufacturer_cmd</A> {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">long</FONT> cmd;
	<FONT COLOR="#298C52">void</FONT> *data;
} <A HREF="#capi_manufacturer_cmd">capi_manufacturer_cmd</A>;

<FONT COLOR=#0000FF>/*
 * CAPI_MANUFACTURER_CMD
 */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_MANUFACTURER_CMD">CAPI_MANUFACTURER_CMD</A>	_IOWR(<FONT COLOR="#FF0000">'C'</FONT>,0x20, <FONT COLOR="#298C52">struct</FONT> <A HREF="#capi_manufacturer_cmd">capi_manufacturer_cmd</A>)

<FONT COLOR=#0000FF>/*
 * CAPI_GET_ERRCODE
 * capi errcode is set, * if read, write, or ioctl returns EIO,
 * ioctl returns errcode directly, and in arg, if != 0
 */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_GET_ERRCODE">CAPI_GET_ERRCODE</A>	_IOR(<FONT COLOR="#FF0000">'C'</FONT>,0x21, __u16)

<FONT COLOR=#0000FF>/*
 * CAPI_INSTALLED
 */</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CAPI_INSTALLED">CAPI_INSTALLED</A>		_IOR(<FONT COLOR="#FF0000">'C'</FONT>,0x22, __u16)

<FONT COLOR=#0000FF>/*
 * member contr is input for
 * CAPI_GET_MANUFACTURER, CAPI_VERSION, CAPI_GET_SERIAL
 * and CAPI_GET_PROFILE
 */</FONT>
<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">union</FONT> <A NAME="capi_ioctl_struct">capi_ioctl_struct</A> {
	__u32 contr;
	<A HREF="#capi_register_params">capi_register_params</A> rparams;
	__u8 manufacturer[<A HREF="#CAPI_MANUFACTURER_LEN">CAPI_MANUFACTURER_LEN</A>];
	<A HREF="#capi_version">capi_version</A> version;
	__u8 serial[<A HREF="#CAPI_SERIAL_LEN">CAPI_SERIAL_LEN</A>];
	<A HREF="#capi_profile">capi_profile</A> profile;
	<A HREF="#capi_manufacturer_cmd">capi_manufacturer_cmd</A> cmd;
	__u16 errcode;
} <A HREF="#capi_ioctl_struct">capi_ioctl_struct</A>;

<FONT COLOR=#A521F7>#endif</FONT>				<FONT COLOR=#0000FF>/* __LINUX_CAPI_H__ */</FONT>
</BODY>

</HTML>
