<HTML>

<!-- Generated by c2html-1.0, Copyright 1998 by Dave Whittington -->
<HEAD>
<TITLE>hisax.h</TITLE>
<!--#include virtual="/ssi/js.shtml" -->
<!--#include virtual="/ssi/buttondefs.shtml" -->
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE WIDTH="100%">
<TR>
<TD ALIGN=LEFT WIDTH="90"><!--#include virtual="/ssi/b_home.shtml" --></TD>
<TD ALIGN=RIGHT WIDTH="90"><!--#include virtual="/ssi/b_index.shtml" --></TD>
</TR>
</TABLE>
<CENTER><H1>hisax.h</H1></CENTER>

<HR>
<PRE>
<FONT COLOR=#0000FF>/* $Id$

 *   Basic declarations, defines and prototypes
 *
 * $Log$
 * Revision 2.21  1998/05/25 14:10:05  keil
 * HiSax 3.0
 * X.75 and leased are working again.
 *
 * Revision 2.20  1998/05/25 12:57:57  keil
 * HiSax golden code from certification, Don't use !!!
 * No leased lines, no X75, but many changes.
 *
 * Revision 2.19  1998/04/15 16:39:15  keil
 * Add S0Box and Teles PCI support
 *
 * Revision 2.18  1998/03/26 07:10:04  paul
 * The jumpmatrix table in struct Fsm was an array of "int". This is not
 * large enough for pointers to functions on Linux/Alpha (instant crash
 * on "insmod hisax). Now there is a typedef for the pointer to function.
 * This also prevents warnings about "incompatible pointer types".
 *
 * Revision 2.17  1998/03/19 13:18:43  keil
 * Start of a CAPI like interface for supplementary Service
 * first service: SUSPEND
 *
 * Revision 2.16  1998/03/09 23:19:25  keil
 * Changes for PCMCIA
 *
 * Revision 2.14  1998/02/11 17:28:04  keil
 * Niccy PnP/PCI support
 *
 * Revision 2.13  1998/02/09 18:46:02  keil
 * Support for Sedlbauer PCMCIA (Marcus Niemann)
 *
 * Revision 2.12  1998/02/03 23:31:30  keil
 * add AMD7930 support
 *
 * Revision 2.11  1998/02/02 13:33:00  keil
 * New card support
 *
 * Revision 2.10  1997/11/08 21:37:52  keil
 * new l1 init;new Compaq card
 *
 * Revision 2.9  1997/11/06 17:09:09  keil
 * New 2.1 init code
 *
 * Revision 2.8  1997/10/29 19:04:13  keil
 * new L1; changes for 2.1
 *
 * Revision 2.7  1997/10/10 20:56:47  fritz
 * New HL interface.
 *
 * Revision 2.6  1997/09/11 17:25:51  keil
 * Add new cards
 *
 * Revision 2.5  1997/08/03 14:36:31  keil
 * Implement RESTART procedure
 *
 * Revision 2.4  1997/07/31 19:25:20  keil
 * PTP_DATA_LINK support
 *
 * Revision 2.3  1997/07/31 11:50:17  keil
 * ONE TEI and FIXED TEI handling
 *
 * Revision 2.2  1997/07/30 17:13:02  keil
 * more changes for 'One TEI per card'
 *
 * Revision 2.1  1997/07/27 21:45:13  keil
 * new main structures
 *
 * Revision 2.0  1997/06/26 11:06:27  keil
 * New card and L1 interface.
 * Eicon.Diehl Diva and Dynalink IS64PH support
 *
 * old changes removed KKe
 *
 */</FONT>
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/config.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/module.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/version.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/errno.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/fs.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/major.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;<FONT COLOR="#298C52">asm</FONT>/segment.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;<FONT COLOR="#298C52">asm</FONT>/io.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/delay.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/kernel.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/signal.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/malloc.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/mm.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/mman.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/ioport.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/timer.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/wait.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/isdnif.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/tty.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/init.h&gt;
<FONT COLOR=#A521F7>#include</FONT> &lt;linux/serialP.h&gt;

<FONT COLOR=#A521F7>#define</FONT> <A NAME="REQUEST">REQUEST</A>		0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CONFIRM">CONFIRM</A>		1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="INDICATION">INDICATION</A>	2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="RESPONSE">RESPONSE</A>	3

<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_ENABLE">HW_ENABLE</A>	0x0000
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_RESET">HW_RESET</A>	0x0004
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_POWERUP">HW_POWERUP</A>	0x0008
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_ACTIVATE">HW_ACTIVATE</A>	0x0010
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_DEACTIVATE">HW_DEACTIVATE</A>	0x0018
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_INFO2">HW_INFO2</A>	0x0020
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_INFO3">HW_INFO3</A>	0x0030
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_INFO4_P8">HW_INFO4_P8</A>	0x0040
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_INFO4_P10">HW_INFO4_P10</A>	0x0048
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_RSYNC">HW_RSYNC</A>	0x0060
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_TESTLOOP">HW_TESTLOOP</A>	0x0070
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_RESET">CARD_RESET</A>	0x00F0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_SETIRQ">CARD_SETIRQ</A>	0x00F1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_INIT">CARD_INIT</A>	0x00F2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_RELEASE">CARD_RELEASE</A>	0x00F3
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_TEST">CARD_TEST</A>	0x00F4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_AUX_IND">CARD_AUX_IND</A>	0x00F5

<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_ACTIVATE">PH_ACTIVATE</A>	0x0100
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_DEACTIVATE">PH_DEACTIVATE</A>	0x0110
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_DATA">PH_DATA</A>		0x0120
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_PULL">PH_PULL</A>		0x0130
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_TESTLOOP">PH_TESTLOOP</A>	0x0140
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PH_PAUSE">PH_PAUSE</A>	0x0150
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MPH_ACTIVATE">MPH_ACTIVATE</A>	0x0180
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MPH_DEACTIVATE">MPH_DEACTIVATE</A>	0x0190
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MPH_INFORMATION">MPH_INFORMATION</A>	0x01A0

<FONT COLOR=#A521F7>#define</FONT> <A NAME="DL_ESTABLISH">DL_ESTABLISH</A>	0x0200
<FONT COLOR=#A521F7>#define</FONT> <A NAME="DL_RELEASE">DL_RELEASE</A>	0x0210
<FONT COLOR=#A521F7>#define</FONT> <A NAME="DL_DATA">DL_DATA</A>		0x0220
<FONT COLOR=#A521F7>#define</FONT> <A NAME="DL_FLUSH">DL_FLUSH</A>	0x0224
<FONT COLOR=#A521F7>#define</FONT> <A NAME="DL_UNIT_DATA">DL_UNIT_DATA</A>	0x0230
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_ASSIGN">MDL_ASSIGN</A>	0x0280
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_REMOVE">MDL_REMOVE</A>	0x0284
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_ERROR">MDL_ERROR</A>	0x0288
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_INFO_SETUP">MDL_INFO_SETUP</A>	0x02E0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_INFO_CONN">MDL_INFO_CONN</A>	0x02E4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MDL_INFO_REL">MDL_INFO_REL</A>	0x02E8


<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_SETUP">CC_SETUP</A>	0x0300
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_RESUME">CC_RESUME</A>	0x0304
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_MORE_INFO">CC_MORE_INFO</A>	0x0310
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_IGNORE">CC_IGNORE</A>	0x0320
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_REJECT">CC_REJECT</A>	0x0324
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_SETUP_COMPL">CC_SETUP_COMPL</A>	0x0330
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_PROCEEDING">CC_PROCEEDING</A>	0x0340
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_ALERTING">CC_ALERTING</A>	0x0344
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_CONNECT">CC_CONNECT</A>	0x0350
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_CHARGE">CC_CHARGE</A>	0x0354
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_DISCONNECT">CC_DISCONNECT</A>	0x0360
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_RELEASE">CC_RELEASE</A>	0x0368
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_SUSPEND">CC_SUSPEND</A>	0x0370
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T303">CC_T303</A>		0x0383
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T304">CC_T304</A>		0x0384
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T305">CC_T305</A>		0x0385
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T308_1">CC_T308_1</A>	0x0388
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T308_2">CC_T308_2</A>	0x0389
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T310">CC_T310</A>		0x0390
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T313">CC_T313</A>		0x0393
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T318">CC_T318</A>		0x0398
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_T319">CC_T319</A>		0x0399
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_NOSETUP_RSP">CC_NOSETUP_RSP</A>	0x03E0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_SETUP_ERR">CC_SETUP_ERR</A>	0x03E1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_SUSPEND_ERR">CC_SUSPEND_ERR</A>	0x03E2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_RESUME_ERR">CC_RESUME_ERR</A>	0x03E3
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_CONNECT_ERR">CC_CONNECT_ERR</A>	0x03E4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_RELEASE_ERR">CC_RELEASE_ERR</A>	0x03E5
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_DLRL">CC_DLRL</A>		0x03F0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CC_RESTART">CC_RESTART</A>	0x03F4


<FONT COLOR=#A521F7>#ifdef</FONT> __KERNEL__

<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_DFRAME_LEN">MAX_DFRAME_LEN</A>	260
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HSCX_BUFMAX">HSCX_BUFMAX</A>	4096
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_DATA_SIZE">MAX_DATA_SIZE</A>	(<A HREF="#HSCX_BUFMAX">HSCX_BUFMAX</A> - 4)
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_DATA_MEM">MAX_DATA_MEM</A>	(<A HREF="#HSCX_BUFMAX">HSCX_BUFMAX</A> + 64)
<FONT COLOR=#A521F7>#define</FONT> <A NAME="RAW_BUFMAX">RAW_BUFMAX</A>	(((<A HREF="#HSCX_BUFMAX">HSCX_BUFMAX</A>*6)/5) + 5)
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_HEADER_LEN">MAX_HEADER_LEN</A>	4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_WINDOW">MAX_WINDOW</A>	8
<FONT COLOR=#A521F7>#define</FONT> <A NAME="MAX_MON_FRAME">MAX_MON_FRAME</A>	32

<FONT COLOR=#0000FF>/* #define I4L_IRQ_FLAG SA_INTERRUPT */</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A NAME="I4L_IRQ_FLAG">I4L_IRQ_FLAG</A>    0

<FONT COLOR=#0000FF>/*
 * Statemachine
 */</FONT>

<FONT COLOR="#298C52">struct</FONT> FsmInst;

<FONT COLOR="#298C52">typedef</FONT> <FONT COLOR="#298C52">void</FONT> (* <A NAME="FSMFNPTR">FSMFNPTR</A>)(<FONT COLOR="#298C52">struct</FONT> FsmInst *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);

<FONT COLOR="#298C52">struct</FONT> Fsm {
	<A HREF="#FSMFNPTR">FSMFNPTR</A> *jumpmatrix;
	<FONT COLOR="#298C52">int</FONT> state_count, event_count;
	<FONT COLOR="#298C52">char</FONT> **strEvent, **strState;
};

<FONT COLOR="#298C52">struct</FONT> FsmInst {
	<FONT COLOR="#298C52">struct</FONT> Fsm *fsm;
	<FONT COLOR="#298C52">int</FONT> state;
	<FONT COLOR="#298C52">int</FONT> debug;
	<FONT COLOR="#298C52">void</FONT> *userdata;
	<FONT COLOR="#298C52">int</FONT> userint;
	<FONT COLOR="#298C52">void</FONT> (*printdebug) (<FONT COLOR="#298C52">struct</FONT> FsmInst *, <FONT COLOR="#298C52">char</FONT> *);
};

<FONT COLOR="#298C52">struct</FONT> FsmNode {
	<FONT COLOR="#298C52">int</FONT> state, event;
	<FONT COLOR="#298C52">void</FONT> (*routine) (<FONT COLOR="#298C52">struct</FONT> FsmInst *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
};

<FONT COLOR="#298C52">struct</FONT> FsmTimer {
	<FONT COLOR="#298C52">struct</FONT> FsmInst *fi;
	<FONT COLOR="#298C52">struct</FONT> timer_list tl;
	<FONT COLOR="#298C52">int</FONT> event;
	<FONT COLOR="#298C52">void</FONT> *arg;
};

<FONT COLOR="#298C52">struct</FONT> L3Timer {
	<FONT COLOR="#298C52">struct</FONT> l3_process *pc;
	<FONT COLOR="#298C52">struct</FONT> timer_list tl;
	<FONT COLOR="#298C52">int</FONT> event;
};

<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_ACTIVATING">FLG_L1_ACTIVATING</A>	1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_ACTIVATED">FLG_L1_ACTIVATED</A>	2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_DEACTTIMER">FLG_L1_DEACTTIMER</A>	3
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_ACTTIMER">FLG_L1_ACTTIMER</A>		4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_T3RUN">FLG_L1_T3RUN</A>		5
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_PULL_REQ">FLG_L1_PULL_REQ</A>		6

<FONT COLOR="#298C52">struct</FONT> Layer1 {
	<FONT COLOR="#298C52">void</FONT> *hardware;
	<FONT COLOR="#298C52">struct</FONT> BCState *bcs;
	<FONT COLOR="#298C52">struct</FONT> PStack **stlistp;
	<FONT COLOR="#298C52">int</FONT> Flags;
	<FONT COLOR="#298C52">struct</FONT> FsmInst l1m;
	<FONT COLOR="#298C52">struct</FONT> FsmTimer	timer;
	<FONT COLOR="#298C52">void</FONT> (*l1l2) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> (*l1hw) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> (*l1tei) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">int</FONT> mode, bc;
	<FONT COLOR="#298C52">int</FONT> delay;
};

<FONT COLOR=#A521F7>#define</FONT> <A NAME="GROUP_TEI">GROUP_TEI</A>	127
<FONT COLOR=#A521F7>#define</FONT> <A NAME="TEI_SAPI">TEI_SAPI</A>	63
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CTRL_SAPI">CTRL_SAPI</A>	0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="PACKET_NOACK">PACKET_NOACK</A>	250

<FONT COLOR=#0000FF>/* Layer2 Flags */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_LAPB">FLG_LAPB</A>	0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_LAPD">FLG_LAPD</A>	1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_ORIG">FLG_ORIG</A>	2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_MOD128">FLG_MOD128</A>	3
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_PEND_REL">FLG_PEND_REL</A>	4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L3_INIT">FLG_L3_INIT</A>	5 
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_T200_RUN">FLG_T200_RUN</A>	6 
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_ACK_PEND">FLG_ACK_PEND</A>	7
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_REJEXC">FLG_REJEXC</A>	8
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_OWN_BUSY">FLG_OWN_BUSY</A>	9
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_PEER_BUSY">FLG_PEER_BUSY</A>	10
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_DCHAN_BUSY">FLG_DCHAN_BUSY</A>	11
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_ACTIV">FLG_L1_ACTIV</A>	12
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_ESTAB_PEND">FLG_ESTAB_PEND</A>	13
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_PTP">FLG_PTP</A>		14
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_FIXED_TEI">FLG_FIXED_TEI</A>	15

<FONT COLOR="#298C52">struct</FONT> Layer2 {
	<FONT COLOR="#298C52">int</FONT> tei;
	<FONT COLOR="#298C52">int</FONT> sap;
	<FONT COLOR="#298C52">int</FONT> maxlen;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> flag;
	<FONT COLOR="#298C52">int</FONT> vs, va, vr;
	<FONT COLOR="#298C52">int</FONT> rc;
	<FONT COLOR="#298C52">int</FONT> window;
	<FONT COLOR="#298C52">int</FONT> sow;
	<FONT COLOR="#298C52">struct</FONT> sk_buff *windowar[<A HREF="#MAX_WINDOW">MAX_WINDOW</A>];
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head i_queue;
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head ui_queue;
	<FONT COLOR="#298C52">void</FONT> (*l2l1) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> (*l2l3) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> (*l2tei) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">struct</FONT> FsmInst l2m;
	<FONT COLOR="#298C52">struct</FONT> FsmTimer t200, t203;
	<FONT COLOR="#298C52">int</FONT> T200, N200, T203;
	<FONT COLOR="#298C52">int</FONT> debug;
	<FONT COLOR="#298C52">char</FONT> debug_id[32];
};

<FONT COLOR="#298C52">struct</FONT> Layer3 {
	<FONT COLOR="#298C52">void</FONT> (*l3l4) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> (*l3l2) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">struct</FONT> FsmInst l3m;
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head squeue;
	<FONT COLOR="#298C52">struct</FONT> l3_process *proc;
	<FONT COLOR="#298C52">struct</FONT> l3_process *global;
	<FONT COLOR="#298C52">int</FONT> N303;
	<FONT COLOR="#298C52">int</FONT> debug;
	<FONT COLOR="#298C52">char</FONT> debug_id[32];
};

<FONT COLOR="#298C52">struct</FONT> LLInterface {
	<FONT COLOR="#298C52">void</FONT> (*l4l3) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">void</FONT> *userdata;
	<FONT COLOR="#298C52">void</FONT> (*l1writewakeup) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>);
	<FONT COLOR="#298C52">void</FONT> (*l2writewakeup) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>);
};


<FONT COLOR="#298C52">struct</FONT> Management {
	<FONT COLOR="#298C52">int</FONT>	ri;
	<FONT COLOR="#298C52">struct</FONT> FsmInst tei_m;
	<FONT COLOR="#298C52">struct</FONT> FsmTimer t202;
	<FONT COLOR="#298C52">int</FONT> T202, N202, debug;
	<FONT COLOR="#298C52">void</FONT> (*layer) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
};


<FONT COLOR="#298C52">struct</FONT> Param {
	<FONT COLOR="#298C52">int</FONT> cause;
	<FONT COLOR="#298C52">int</FONT> loc;
	<FONT COLOR="#298C52">int</FONT> bchannel;
	setup_parm setup;	<FONT COLOR=#0000FF>/* from isdnif.h numbers and Serviceindicator */</FONT>
	<FONT COLOR="#298C52">int</FONT> chargeinfo;		<FONT COLOR=#0000FF>/* Charge Info - only for 1tr6 in
				 * the moment
				 */</FONT>
	<FONT COLOR="#298C52">int</FONT> spv;		<FONT COLOR=#0000FF>/* SPV Flag */</FONT>
};


<FONT COLOR="#298C52">struct</FONT> PStack {
	<FONT COLOR="#298C52">struct</FONT> PStack *next;
	<FONT COLOR="#298C52">struct</FONT> Layer1 l1;
	<FONT COLOR="#298C52">struct</FONT> Layer2 l2;
	<FONT COLOR="#298C52">struct</FONT> Layer3 l3;
	<FONT COLOR="#298C52">struct</FONT> LLInterface lli; 
	<FONT COLOR="#298C52">struct</FONT> Management ma;
	<FONT COLOR="#298C52">int</FONT> protocol;		<FONT COLOR=#0000FF>/* EDSS1 or 1TR6 */</FONT>
};

<FONT COLOR="#298C52">struct</FONT> l3_process {
	<FONT COLOR="#298C52">int</FONT> callref;
	<FONT COLOR="#298C52">int</FONT> state;
	<FONT COLOR="#298C52">struct</FONT> L3Timer timer;
	<FONT COLOR="#298C52">int</FONT> N303;
	<FONT COLOR="#298C52">int</FONT> debug;
	<FONT COLOR="#298C52">struct</FONT> Param para;
	<FONT COLOR="#298C52">struct</FONT> Channel *chan;
	<FONT COLOR="#298C52">struct</FONT> PStack *st;
	<FONT COLOR="#298C52">struct</FONT> l3_process *next;
};

<FONT COLOR="#298C52">struct</FONT> hscx_hw {
	<FONT COLOR="#298C52">int</FONT> rcvidx;
	<FONT COLOR="#298C52">int</FONT> count;              <FONT COLOR=#0000FF>/* Current skb sent count */</FONT>
	u_char *rcvbuf;         <FONT COLOR=#0000FF>/* B-Channel receive Buffer */</FONT>
	<FONT COLOR="#298C52">struct</FONT> sk_buff *tx_skb; <FONT COLOR=#0000FF>/* B-Channel transmit Buffer */</FONT>
};

<FONT COLOR="#298C52">struct</FONT> hfcB_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> *send;
	<FONT COLOR="#298C52">int</FONT> f1;
	<FONT COLOR="#298C52">int</FONT> f2;
	<FONT COLOR="#298C52">struct</FONT> sk_buff *tx_skb; <FONT COLOR=#0000FF>/* B-Channel transmit Buffer */</FONT>
};

<FONT COLOR="#298C52">struct</FONT> tiger_hw {
	<FONT COLOR="#298C52">struct</FONT> sk_buff *tx_skb; <FONT COLOR=#0000FF>/* B-Channel transmit Buffer */</FONT>
	u_int *send;
	u_int *s_irq;
	u_int *s_end;
	u_int *sendp;
	u_int *rec;
	<FONT COLOR="#298C52">int</FONT> free;
	u_char *rcvbuf;
	u_char *sendbuf;
	u_char *sp;
	<FONT COLOR="#298C52">int</FONT> sendcnt;
	u_int s_tot;
	u_int r_bitcnt;
	u_int r_tot;
	u_int r_err;
	u_int r_fcs;
	u_char r_state;
	u_char r_one;
	u_char r_val;
	u_char s_state;
};

<FONT COLOR="#298C52">struct</FONT> amd7930_hw {
	u_char *tx_buff;
	u_char *rv_buff;
	<FONT COLOR="#298C52">int</FONT> rv_buff_in;
	<FONT COLOR="#298C52">int</FONT> rv_buff_out;
	<FONT COLOR="#298C52">struct</FONT> sk_buff *rv_skb;
	<FONT COLOR="#298C52">struct</FONT> hdlc_state *hdlc_state;
	<FONT COLOR="#298C52">struct</FONT> tq_struct tq_rcv;
	<FONT COLOR="#298C52">struct</FONT> tq_struct tq_xmt;
	<FONT COLOR="#298C52">struct</FONT> sk_buff *tx_skb; <FONT COLOR=#0000FF>/* B-Channel transmit Buffer */</FONT>
};


<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_INIT">BC_FLG_INIT</A>	1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_ACTIV">BC_FLG_ACTIV</A>	2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_BUSY">BC_FLG_BUSY</A>	3
<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_NOFRAME">BC_FLG_NOFRAME</A>	4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_HALF">BC_FLG_HALF</A>	5
<FONT COLOR=#A521F7>#define</FONT> <A NAME="BC_FLG_EMPTY">BC_FLG_EMPTY</A>	6

<FONT COLOR=#A521F7>#define</FONT> <A NAME="L1_MODE_NULL">L1_MODE_NULL</A>	0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="L1_MODE_TRANS">L1_MODE_TRANS</A>	1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="L1_MODE_HDLC">L1_MODE_HDLC</A>	2
<FONT COLOR=#A521F7>#define</FONT> <A NAME="L1_MODE_MODEM">L1_MODE_MODEM</A>	7

<FONT COLOR="#298C52">struct</FONT> BCState {
	<FONT COLOR="#298C52">int</FONT> channel;
	<FONT COLOR="#298C52">int</FONT> mode;
	<FONT COLOR="#298C52">int</FONT> Flag;
	<FONT COLOR="#298C52">struct</FONT> IsdnCardState *cs;
	<FONT COLOR="#298C52">int</FONT> tx_cnt;		<FONT COLOR=#0000FF>/* B-Channel transmit counter */</FONT>
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head rqueue;	<FONT COLOR=#0000FF>/* B-Channel receive Queue */</FONT>
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head squeue;	<FONT COLOR=#0000FF>/* B-Channel send Queue */</FONT>
	<FONT COLOR="#298C52">struct</FONT> PStack *st;
	<FONT COLOR="#298C52">struct</FONT> tq_struct tqueue;
	<FONT COLOR="#298C52">int</FONT> event;
	<FONT COLOR="#298C52">int</FONT>  (*BC_SetStack) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">struct</FONT> BCState *);
	<FONT COLOR="#298C52">void</FONT> (*BC_Close) (<FONT COLOR="#298C52">struct</FONT> BCState *);
	<FONT COLOR="#298C52">union</FONT> {
		<FONT COLOR="#298C52">struct</FONT> hscx_hw hscx;
		<FONT COLOR="#298C52">struct</FONT> hfcB_hw hfc;
		<FONT COLOR="#298C52">struct</FONT> tiger_hw tiger;
		<FONT COLOR="#298C52">struct</FONT> amd7930_hw  amd7930;
	} hw;
};

<FONT COLOR="#298C52">struct</FONT> Channel {
	<FONT COLOR="#298C52">struct</FONT> PStack *b_st, *d_st;
	<FONT COLOR="#298C52">struct</FONT> IsdnCardState *cs;
	<FONT COLOR="#298C52">struct</FONT> BCState *bcs;
	<FONT COLOR="#298C52">int</FONT> chan;
	<FONT COLOR="#298C52">int</FONT> incoming;
	<FONT COLOR="#298C52">struct</FONT> FsmInst fi;
	<FONT COLOR="#298C52">struct</FONT> FsmTimer drel_timer, dial_timer;
	<FONT COLOR="#298C52">int</FONT> debug;
	<FONT COLOR="#298C52">int</FONT> l2_protocol, l2_active_protocol;
	<FONT COLOR="#298C52">int</FONT> data_open;
	<FONT COLOR="#298C52">struct</FONT> l3_process *proc;
	setup_parm setup;	<FONT COLOR=#0000FF>/* from isdnif.h numbers and Serviceindicator */</FONT>
	<FONT COLOR="#298C52">int</FONT> Flags;		<FONT COLOR=#0000FF>/* for remembering action done in l4 */</FONT>
	<FONT COLOR="#298C52">int</FONT> leased;
};

<FONT COLOR="#298C52">struct</FONT> elsa_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> base;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> ctrl;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> ale;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> itac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> trig;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> timer;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> counter;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> status;
	<FONT COLOR="#298C52">struct</FONT> timer_list tl;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> MFlag;
	<FONT COLOR="#298C52">struct</FONT> BCState *bcs;
	u_char *transbuf;
	u_char *rcvbuf;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> transp;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> rcvp;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> transcnt;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> rcvcnt;
	u_char IER;
	u_char FCR;
	u_char LCR;
	u_char MCR;
	u_char ctrl_reg;
};

<FONT COLOR="#298C52">struct</FONT> teles3_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">signed</FONT>   <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">signed</FONT>   <FONT COLOR="#298C52">int</FONT> hscx[2];
	<FONT COLOR="#298C52">signed</FONT>   <FONT COLOR="#298C52">int</FONT> isacfifo;
	<FONT COLOR="#298C52">signed</FONT>   <FONT COLOR="#298C52">int</FONT> hscxfifo[2];
};	

<FONT COLOR="#298C52">struct</FONT> teles0_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> membase;
};	

<FONT COLOR="#298C52">struct</FONT> avm_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx[2];
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isacfifo;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscxfifo[2];
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> counter;
};	

<FONT COLOR="#298C52">struct</FONT> ix1_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac_ale;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx_ale;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
};

<FONT COLOR="#298C52">struct</FONT> diva_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> ctrl;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac_adr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx_adr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> status;
	<FONT COLOR="#298C52">struct</FONT> timer_list tl;
	u_char ctrl_reg;
};	

<FONT COLOR="#298C52">struct</FONT> asus_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> adr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> u7;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> pots;
};


<FONT COLOR="#298C52">struct</FONT> hfc_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> addr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> fifosize;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> cirm;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> ctmt;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> cip;
	u_char isac_spcr;
	<FONT COLOR="#298C52">struct</FONT> timer_list timer;
};

<FONT COLOR="#298C52">struct</FONT> sedl_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> adr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> reset_on;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> reset_off;
};

<FONT COLOR="#298C52">struct</FONT> spt_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx[2];
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> res_irq;
};	

<FONT COLOR="#298C52">struct</FONT> mic_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> cfg_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> adr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> hscx;
};

<FONT COLOR="#298C52">struct</FONT> njet_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> base;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> isac;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> auxa;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> auxd;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> dmactrl;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> ctrl_reg;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> irqmask0;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> irqstat0;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> last_is0;
};

<FONT COLOR="#298C52">struct</FONT> hfcD_hw {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> addr;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> bfifosize;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> dfifosize;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> cirm;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> ctmt;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> cip;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> conn;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> mst_m;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> int_m1;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> int_m2;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> int_s1;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> sctrl;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> stat;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> fifo;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> f1;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> f2;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> *send;
	<FONT COLOR="#298C52">struct</FONT> timer_list timer;
};

<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_IOM1">HW_IOM1</A>		0
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_IPAC">HW_IPAC</A>		1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_TWO_DCHAN">FLG_TWO_DCHAN</A>	4
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_L1_DBUSY">FLG_L1_DBUSY</A>	5
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_DBUSY_TIMER">FLG_DBUSY_TIMER</A> 6
<FONT COLOR=#A521F7>#define</FONT> <A NAME="FLG_LOCK_ATOMIC">FLG_LOCK_ATOMIC</A> 7
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_MON0_RX_END">HW_MON0_RX_END</A>	8
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_MON1_RX_END">HW_MON1_RX_END</A>	9
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_MON0_TX_END">HW_MON0_TX_END</A>	10
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HW_MON1_TX_END">HW_MON1_TX_END</A>	11

<FONT COLOR="#298C52">struct</FONT> IsdnCardState {
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> typ;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">char</FONT> subtyp;
	<FONT COLOR="#298C52">int</FONT> protocol;
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> irq;
	<FONT COLOR="#298C52">int</FONT> HW_Flags; 
	<FONT COLOR="#298C52">int</FONT> *busy_flag;
	<FONT COLOR="#298C52">union</FONT> {
		<FONT COLOR="#298C52">struct</FONT> elsa_hw elsa;
		<FONT COLOR="#298C52">struct</FONT> teles0_hw teles0;
		<FONT COLOR="#298C52">struct</FONT> teles3_hw teles3;
		<FONT COLOR="#298C52">struct</FONT> avm_hw avm;
		<FONT COLOR="#298C52">struct</FONT> ix1_hw ix1;
		<FONT COLOR="#298C52">struct</FONT> diva_hw diva;
		<FONT COLOR="#298C52">struct</FONT> asus_hw asus;
		<FONT COLOR="#298C52">struct</FONT> hfc_hw hfc;
		<FONT COLOR="#298C52">struct</FONT> sedl_hw sedl;
		<FONT COLOR="#298C52">struct</FONT> spt_hw spt;
		<FONT COLOR="#298C52">struct</FONT> mic_hw mic;
		<FONT COLOR="#298C52">struct</FONT> njet_hw njet;
		<FONT COLOR="#298C52">struct</FONT> hfcD_hw hfcD;
		<FONT COLOR="#298C52">struct</FONT> ix1_hw niccy;
	} hw;
	<FONT COLOR="#298C52">int</FONT> myid;
	isdn_if iif;
	u_char *status_buf;
	u_char *status_read;
	u_char *status_write;
	u_char *status_end;
	u_char (*readisac) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, u_char);
	<FONT COLOR="#298C52">void</FONT>   (*writeisac) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, u_char, u_char);
	<FONT COLOR="#298C52">void</FONT>   (*readisacfifo) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, u_char *, <FONT COLOR="#298C52">int</FONT>);
	<FONT COLOR="#298C52">void</FONT>   (*writeisacfifo) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, u_char *, <FONT COLOR="#298C52">int</FONT>);
	u_char (*BC_Read_Reg) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, <FONT COLOR="#298C52">int</FONT>, u_char);
	<FONT COLOR="#298C52">void</FONT>   (*BC_Write_Reg) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, <FONT COLOR="#298C52">int</FONT>, u_char, u_char);
	<FONT COLOR="#298C52">void</FONT>   (*BC_Send_Data) (<FONT COLOR="#298C52">struct</FONT> BCState *);
	<FONT COLOR="#298C52">int</FONT>    (*cardmsg) (<FONT COLOR="#298C52">struct</FONT> IsdnCardState *, <FONT COLOR="#298C52">int</FONT>, <FONT COLOR="#298C52">void</FONT> *);
	<FONT COLOR="#298C52">struct</FONT> Channel channel[2];
	<FONT COLOR="#298C52">struct</FONT> BCState bcs[2];
	<FONT COLOR="#298C52">struct</FONT> PStack *stlist;
	u_char *rcvbuf;
	<FONT COLOR="#298C52">int</FONT> rcvidx;
	<FONT COLOR="#298C52">struct</FONT> sk_buff *tx_skb;
	<FONT COLOR="#298C52">int</FONT> tx_cnt;
	<FONT COLOR="#298C52">int</FONT> event;
	<FONT COLOR="#298C52">struct</FONT> tq_struct tqueue;
	<FONT COLOR="#298C52">struct</FONT> timer_list dbusytimer;
	<FONT COLOR="#298C52">struct</FONT> sk_buff_head rq, sq; <FONT COLOR=#0000FF>/* D-channel queues */</FONT>
	<FONT COLOR="#298C52">int</FONT> ph_state;
	<FONT COLOR="#298C52">int</FONT> cardnr;
	<FONT COLOR="#298C52">int</FONT> dlogflag;
	<FONT COLOR="#298C52">char</FONT> *dlogspace;
	<FONT COLOR="#298C52">int</FONT> debug;
	u_char *mon_tx;
	u_char *mon_rx;
	<FONT COLOR="#298C52">int</FONT> mon_txp;
	<FONT COLOR="#298C52">int</FONT> mon_txc;
	<FONT COLOR="#298C52">int</FONT> mon_rxp;
	u_char mocr;
	<FONT COLOR="#298C52">void</FONT>   (*setstack_d) (<FONT COLOR="#298C52">struct</FONT> PStack *, <FONT COLOR="#298C52">struct</FONT> IsdnCardState *);
};

<FONT COLOR=#A521F7>#define</FONT>  <A NAME="MON0_RX">MON0_RX</A>	1
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="MON1_RX">MON1_RX</A>	2
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="MON0_TX">MON0_TX</A>	4
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="MON1_TX">MON1_TX</A>	8

<FONT COLOR=#A521F7>#define</FONT>	 <A NAME="HISAX_MAX_CARDS">HISAX_MAX_CARDS</A>	8

<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_16_0">ISDN_CTYPE_16_0</A>	1
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_8_0">ISDN_CTYPE_8_0</A>		2
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_16_3">ISDN_CTYPE_16_3</A>	3
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_PNP">ISDN_CTYPE_PNP</A>		4
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_A1">ISDN_CTYPE_A1</A>		5
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_ELSA">ISDN_CTYPE_ELSA</A>	6
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_ELSA_PNP">ISDN_CTYPE_ELSA_PNP</A>	7
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_TELESPCMCIA">ISDN_CTYPE_TELESPCMCIA</A>	8
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_IX1MICROR2">ISDN_CTYPE_IX1MICROR2</A>	9
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_ELSA_PCMCIA">ISDN_CTYPE_ELSA_PCMCIA</A>	10
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_DIEHLDIVA">ISDN_CTYPE_DIEHLDIVA</A>	11
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_ASUSCOM">ISDN_CTYPE_ASUSCOM</A>	12
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_TELEINT">ISDN_CTYPE_TELEINT</A>	13
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_TELES3C">ISDN_CTYPE_TELES3C</A>	14
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_SEDLBAUER">ISDN_CTYPE_SEDLBAUER</A>	15
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_SPORTSTER">ISDN_CTYPE_SPORTSTER</A>	16
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_MIC">ISDN_CTYPE_MIC</A>		17
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_ELSA_PCI">ISDN_CTYPE_ELSA_PCI</A>	18
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_COMPAQ_ISA">ISDN_CTYPE_COMPAQ_ISA</A>	19
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_NETJET">ISDN_CTYPE_NETJET</A>	20
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_TELESPCI">ISDN_CTYPE_TELESPCI</A>	21
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_SEDLBAUER_PCMCIA">ISDN_CTYPE_SEDLBAUER_PCMCIA</A>	22
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_AMD7930">ISDN_CTYPE_AMD7930</A>	23
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_NICCY">ISDN_CTYPE_NICCY</A>	24
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_S0BOX">ISDN_CTYPE_S0BOX</A>	25

<FONT COLOR=#A521F7>#define</FONT>  <A NAME="ISDN_CTYPE_COUNT">ISDN_CTYPE_COUNT</A>	25

<FONT COLOR=#A521F7>#ifdef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A HREF="callc.c.shtml#HISAX_INITFUNC">HISAX_INITFUNC</A>(__arginit) <A HREF="asuscom.c.shtml#__initfunc">__initfunc</A>(__arginit)
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HISAX_INITDATA">HISAX_INITDATA</A> __initdata

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_16_0
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_TELES0">CARD_TELES0</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_16_0">ISDN_CTYPE_16_0</A>) | (1&lt;&lt; <A HREF="#ISDN_CTYPE_8_0">ISDN_CTYPE_8_0</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A NAME="ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_TELES0">CARD_TELES0</A>  0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_16_3
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_TELES3">CARD_TELES3</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_16_3">ISDN_CTYPE_16_3</A>) | (1&lt;&lt; <A HREF="#ISDN_CTYPE_PNP">ISDN_CTYPE_PNP</A>) | \
		     (1&lt;&lt; <A HREF="#ISDN_CTYPE_TELESPCMCIA">ISDN_CTYPE_TELESPCMCIA</A>) | (1&lt;&lt; <A HREF="#ISDN_CTYPE_COMPAQ_ISA">ISDN_CTYPE_COMPAQ_ISA</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_TELES3">CARD_TELES3</A>  0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_TELESPCI
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_TELESPCI">CARD_TELESPCI</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_TELESPCI">ISDN_CTYPE_TELESPCI</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_TELESPCI">CARD_TELESPCI</A>  0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_AVM_A1
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_AVM_A1">CARD_AVM_A1</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_A1">ISDN_CTYPE_A1</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_AVM_A1">CARD_AVM_A1</A>  0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_ELSA
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_ELSA">CARD_ELSA</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_ELSA">ISDN_CTYPE_ELSA</A>) | (1&lt;&lt; <A HREF="#ISDN_CTYPE_ELSA_PNP">ISDN_CTYPE_ELSA_PNP</A>) | \
		   (1&lt;&lt; <A HREF="#ISDN_CTYPE_ELSA_PCMCIA">ISDN_CTYPE_ELSA_PCMCIA</A>) | (1&lt;&lt; <A HREF="#ISDN_CTYPE_ELSA_PCI">ISDN_CTYPE_ELSA_PCI</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="callc.c.shtml#HISAX_INITFUNC">HISAX_INITFUNC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="callc.c.shtml#HISAX_INITFUNC">HISAX_INITFUNC</A>(__arginit) __arginit
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#HISAX_INITDATA">HISAX_INITDATA</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#HISAX_INITDATA">HISAX_INITDATA</A>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_ELSA">CARD_ELSA</A>  0
<FONT COLOR=#A521F7>#endif</FONT>


<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_IX1MICROR2
<FONT COLOR=#A521F7>#define</FONT>	<A NAME="CARD_IX1MICROR2">CARD_IX1MICROR2</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_IX1MICROR2">ISDN_CTYPE_IX1MICROR2</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_IX1MICROR2">CARD_IX1MICROR2</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_DIEHLDIVA
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_DIEHLDIVA">CARD_DIEHLDIVA</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_DIEHLDIVA">ISDN_CTYPE_DIEHLDIVA</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_DIEHLDIVA">CARD_DIEHLDIVA</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_ASUSCOM
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_ASUSCOM">CARD_ASUSCOM</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_ASUSCOM">ISDN_CTYPE_ASUSCOM</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_ASUSCOM">CARD_ASUSCOM</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_TELEINT
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_TELEINT">CARD_TELEINT</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_TELEINT">ISDN_CTYPE_TELEINT</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_TELEINT">CARD_TELEINT</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_SEDLBAUER
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_SEDLBAUER">CARD_SEDLBAUER</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_SEDLBAUER">ISDN_CTYPE_SEDLBAUER</A>) | (1 &lt;&lt; <A HREF="#ISDN_CTYPE_SEDLBAUER_PCMCIA">ISDN_CTYPE_SEDLBAUER_PCMCIA</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_SEDLBAUER">CARD_SEDLBAUER</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_SPORTSTER
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_SPORTSTER">CARD_SPORTSTER</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_SPORTSTER">ISDN_CTYPE_SPORTSTER</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_SPORTSTER">CARD_SPORTSTER</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_MIC
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_MIC">CARD_MIC</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_MIC">ISDN_CTYPE_MIC</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_MIC">CARD_MIC</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_NETJET
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_NETJET">CARD_NETJET</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_NETJET">ISDN_CTYPE_NETJET</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_NETJET">CARD_NETJET</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_TELES3C
<FONT COLOR=#A521F7>#define</FONT>  <A NAME="CARD_TELES3C">CARD_TELES3C</A> (1&lt;&lt; <A HREF="#ISDN_CTYPE_TELES3C">ISDN_CTYPE_TELES3C</A>)
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT>  <A HREF="#CARD_TELES3C">CARD_TELES3C</A>  0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>  CONFIG_HISAX_AMD7930
<FONT COLOR=#A521F7>#define</FONT> <A NAME="CARD_AMD7930">CARD_AMD7930</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_AMD7930">ISDN_CTYPE_AMD7930</A>)
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_AMD7930">CARD_AMD7930</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_NICCY
<FONT COLOR=#A521F7>#define</FONT>	<A NAME="CARD_NICCY">CARD_NICCY</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_NICCY">ISDN_CTYPE_NICCY</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_NICCY">CARD_NICCY</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_S0BOX
<FONT COLOR=#A521F7>#define</FONT>	<A NAME="CARD_S0BOX">CARD_S0BOX</A> (1 &lt;&lt; <A HREF="#ISDN_CTYPE_S0BOX">ISDN_CTYPE_S0BOX</A>)
<FONT COLOR=#A521F7>#ifndef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#else</FONT>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#CARD_S0BOX">CARD_S0BOX</A> 0
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#define</FONT>  <A NAME="SUPORTED_CARDS">SUPORTED_CARDS</A>  (<A HREF="#CARD_TELES0">CARD_TELES0</A> | <A HREF="#CARD_TELES3">CARD_TELES3</A> | <A HREF="#CARD_AVM_A1">CARD_AVM_A1</A> | <A HREF="#CARD_ELSA">CARD_ELSA</A> \
			 | <A HREF="#CARD_IX1MICROR2">CARD_IX1MICROR2</A> | <A HREF="#CARD_DIEHLDIVA">CARD_DIEHLDIVA</A> | <A HREF="#CARD_ASUSCOM">CARD_ASUSCOM</A> \
			 | <A HREF="#CARD_TELEINT">CARD_TELEINT</A> | <A HREF="#CARD_SEDLBAUER">CARD_SEDLBAUER</A> | <A HREF="#CARD_SPORTSTER">CARD_SPORTSTER</A> \
			 | <A HREF="#CARD_MIC">CARD_MIC</A> | <A HREF="#CARD_NETJET">CARD_NETJET</A> | <A HREF="#CARD_TELES3C">CARD_TELES3C</A> | <A HREF="#CARD_AMD7930">CARD_AMD7930</A> \
			 | <A HREF="#CARD_NICCY">CARD_NICCY</A> | <A HREF="#CARD_S0BOX">CARD_S0BOX</A> | <A HREF="#CARD_TELESPCI">CARD_TELESPCI</A>)

<FONT COLOR=#A521F7>#define</FONT> <A NAME="TEI_PER_CARD">TEI_PER_CARD</A> 0

<FONT COLOR=#A521F7>#ifdef</FONT> CONFIG_HISAX_1TR6
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#TEI_PER_CARD">TEI_PER_CARD</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#TEI_PER_CARD">TEI_PER_CARD</A> 1
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR=#A521F7>#ifdef</FONT> CONFIG_HISAX_EURO
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#TEI_PER_CARD">TEI_PER_CARD</A>
<FONT COLOR=#A521F7>#define</FONT> <A HREF="#TEI_PER_CARD">TEI_PER_CARD</A> 1
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HISAX_EURO_SENDCOMPLETE">HISAX_EURO_SENDCOMPLETE</A> 1
<FONT COLOR=#A521F7>#ifdef</FONT>	CONFIG_HISAX_ML
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#HISAX_EURO_SENDCOMPLETE">HISAX_EURO_SENDCOMPLETE</A>
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#undef</FONT> <A HREF="#HISAX_DE_AOC">HISAX_DE_AOC</A>
<FONT COLOR=#A521F7>#ifdef</FONT> CONFIG_DE_AOC
<FONT COLOR=#A521F7>#define</FONT> <A NAME="HISAX_DE_AOC">HISAX_DE_AOC</A> 1
<FONT COLOR=#A521F7>#endif</FONT>
<FONT COLOR=#A521F7>#endif</FONT>

<FONT COLOR="#298C52">struct</FONT> IsdnCard {
	<FONT COLOR="#298C52">int</FONT> typ;
	<FONT COLOR="#298C52">int</FONT> protocol;		<FONT COLOR=#0000FF>/* EDSS1 or 1TR6 */</FONT>
	<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> para[4];
	<FONT COLOR="#298C52">struct</FONT> IsdnCardState *cs;
};

<FONT COLOR="#298C52">int</FONT> HiSax_inithardware(<FONT COLOR="#298C52">int</FONT> *);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#HiSax_closecard">HiSax_closecard</A>(<FONT COLOR="#298C52">int</FONT> cardnr);

<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#setstack_HiSax">setstack_HiSax</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st, <FONT COLOR="#298C52">struct</FONT> IsdnCardState *cs);
<FONT COLOR="#298C52">unsigned</FONT> <FONT COLOR="#298C52">int</FONT> <A HREF="tei.c.shtml#random_ri">random_ri</A>(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#HiSax_addlist">HiSax_addlist</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp, <FONT COLOR="#298C52">struct</FONT> PStack *st);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#HiSax_rmlist">HiSax_rmlist</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp, <FONT COLOR="#298C52">struct</FONT> PStack *st);

<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#setstack_l1_B">setstack_l1_B</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);

<FONT COLOR="#298C52">void</FONT> <A HREF="tei.c.shtml#setstack_tei">setstack_tei</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);
<FONT COLOR="#298C52">void</FONT> <A HREF="lmgr.c.shtml#setstack_manager">setstack_manager</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);

<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl2.c.shtml#setstack_isdnl2">setstack_isdnl2</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st, <FONT COLOR="#298C52">char</FONT> *debug_id);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl2.c.shtml#releasestack_isdnl2">releasestack_isdnl2</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl2.c.shtml#setstack_transl2">setstack_transl2</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl2.c.shtml#releasestack_transl2">releasestack_transl2</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);

<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl3.c.shtml#setstack_l3dc">setstack_l3dc</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st, <FONT COLOR="#298C52">struct</FONT> Channel *chanp);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl3.c.shtml#setstack_l3bc">setstack_l3bc</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st, <FONT COLOR="#298C52">struct</FONT> Channel *chanp);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl3.c.shtml#releasestack_isdnl3">releasestack_isdnl3</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st);

u_char *<A HREF="isdnl3.c.shtml#findie">findie</A>(u_char * p, <FONT COLOR="#298C52">int</FONT> size, u_char ie, <FONT COLOR="#298C52">int</FONT> wanted_set);
<FONT COLOR="#298C52">int</FONT> <A HREF="isdnl3.c.shtml#getcallref">getcallref</A>(u_char * p);
<FONT COLOR="#298C52">int</FONT> <A HREF="isdnl3.c.shtml#newcallref">newcallref</A>(<FONT COLOR="#298C52">void</FONT>);

<FONT COLOR="#298C52">void</FONT> FsmNew(<FONT COLOR="#298C52">struct</FONT> Fsm *fsm, <FONT COLOR="#298C52">struct</FONT> FsmNode *fnlist, <FONT COLOR="#298C52">int</FONT> fncount);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#FsmFree">FsmFree</A>(<FONT COLOR="#298C52">struct</FONT> Fsm *fsm);
<FONT COLOR="#298C52">int</FONT> <A HREF="fsm.c.shtml#FsmEvent">FsmEvent</A>(<FONT COLOR="#298C52">struct</FONT> FsmInst *fi, <FONT COLOR="#298C52">int</FONT> event, <FONT COLOR="#298C52">void</FONT> *arg);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#FsmChangeState">FsmChangeState</A>(<FONT COLOR="#298C52">struct</FONT> FsmInst *fi, <FONT COLOR="#298C52">int</FONT> newstate);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#FsmInitTimer">FsmInitTimer</A>(<FONT COLOR="#298C52">struct</FONT> FsmInst *fi, <FONT COLOR="#298C52">struct</FONT> FsmTimer *ft);
<FONT COLOR="#298C52">int</FONT> <A HREF="fsm.c.shtml#FsmAddTimer">FsmAddTimer</A>(<FONT COLOR="#298C52">struct</FONT> FsmTimer *ft, <FONT COLOR="#298C52">int</FONT> millisec, <FONT COLOR="#298C52">int</FONT> event,
	<FONT COLOR="#298C52">void</FONT> *arg, <FONT COLOR="#298C52">int</FONT> where);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#FsmRestartTimer">FsmRestartTimer</A>(<FONT COLOR="#298C52">struct</FONT> FsmTimer *ft, <FONT COLOR="#298C52">int</FONT> millisec, <FONT COLOR="#298C52">int</FONT> event,
	<FONT COLOR="#298C52">void</FONT> *arg, <FONT COLOR="#298C52">int</FONT> where);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#FsmDelTimer">FsmDelTimer</A>(<FONT COLOR="#298C52">struct</FONT> FsmTimer *ft, <FONT COLOR="#298C52">int</FONT> where);
<FONT COLOR="#298C52">void</FONT> <A HREF="fsm.c.shtml#jiftime">jiftime</A>(<FONT COLOR="#298C52">char</FONT> *s, <FONT COLOR="#298C52">long</FONT> mark);

<FONT COLOR="#298C52">int</FONT> <A HREF="callc.c.shtml#HiSax_command">HiSax_command</A>(isdn_ctrl * ic);
<FONT COLOR="#298C52">int</FONT> <A HREF="callc.c.shtml#HiSax_writebuf_skb">HiSax_writebuf_skb</A>(<FONT COLOR="#298C52">int</FONT> id, <FONT COLOR="#298C52">int</FONT> chan, <FONT COLOR="#298C52">int</FONT> ack, <FONT COLOR="#298C52">struct</FONT> sk_buff *skb);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#HiSax_putstatus">HiSax_putstatus</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *csta, <FONT COLOR="#298C52">char</FONT> *buf);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#HiSax_reportcard">HiSax_reportcard</A>(<FONT COLOR="#298C52">int</FONT> cardnr);
<FONT COLOR="#298C52">int</FONT> <A HREF="q931.c.shtml#QuickHex">QuickHex</A>(<FONT COLOR="#298C52">char</FONT> *txt, u_char * p, <FONT COLOR="#298C52">int</FONT> cnt);
<FONT COLOR="#298C52">void</FONT> <A HREF="q931.c.shtml#LogFrame">LogFrame</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp, u_char * p, <FONT COLOR="#298C52">int</FONT> size);
<FONT COLOR="#298C52">void</FONT> <A HREF="q931.c.shtml#dlogframe">dlogframe</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp, u_char * p, <FONT COLOR="#298C52">int</FONT> size, <FONT COLOR="#298C52">char</FONT> *comment);
<FONT COLOR="#298C52">void</FONT> <A HREF="q931.c.shtml#iecpy">iecpy</A>(u_char * dest, u_char * iestart, <FONT COLOR="#298C52">int</FONT> ieoffset);
<FONT COLOR="#298C52">int</FONT> <A HREF="callc.c.shtml#discard_queue">discard_queue</A>(<FONT COLOR="#298C52">struct</FONT> sk_buff_head *q);
<FONT COLOR=#A521F7>#ifdef</FONT> <A HREF="#ISDN_CHIP_ISAC">ISDN_CHIP_ISAC</A>
<FONT COLOR="#298C52">void</FONT> <A HREF="isac.c.shtml#setstack_isac">setstack_isac</A>(<FONT COLOR="#298C52">struct</FONT> PStack *st, <FONT COLOR="#298C52">struct</FONT> IsdnCardState *cs);
<FONT COLOR=#A521F7>#endif</FONT>	<FONT COLOR=#0000FF>/* ISDN_CHIP_ISAC */</FONT>
<FONT COLOR=#A521F7>#endif</FONT>	<FONT COLOR=#0000FF>/* __KERNEL__ */</FONT>

<FONT COLOR=#A521F7>#define</FONT> <A HREF="#HZDELAY">HZDELAY</A>(jiffs) {<FONT COLOR="#298C52">int</FONT> tout = jiffs; <FONT COLOR="#298C52">while</FONT> (tout--) udelay(1000000/HZ);}

<FONT COLOR="#298C52">int</FONT> <A HREF="isdnl1.c.shtml#ll_run">ll_run</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *csta);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#ll_stop">ll_stop</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *csta);
<FONT COLOR="#298C52">void</FONT> CallcNew(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="callc.c.shtml#CallcFree">CallcFree</A>(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">int</FONT> <A HREF="callc.c.shtml#CallcNewChan">CallcNewChan</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *csta);
<FONT COLOR="#298C52">void</FONT> <A HREF="callc.c.shtml#CallcFreeChan">CallcFreeChan</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *csta);
<FONT COLOR="#298C52">void</FONT> Isdnl1New(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl1.c.shtml#Isdnl1Free">Isdnl1Free</A>(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> Isdnl2New(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl2.c.shtml#Isdnl2Free">Isdnl2Free</A>(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> Isdnl3New(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="isdnl3.c.shtml#Isdnl3Free">Isdnl3Free</A>(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="tei.c.shtml#init_tei">init_tei</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp, <FONT COLOR="#298C52">int</FONT> protocol);
<FONT COLOR="#298C52">void</FONT> <A HREF="tei.c.shtml#release_tei">release_tei</A>(<FONT COLOR="#298C52">struct</FONT> IsdnCardState *sp);
<FONT COLOR="#298C52">char</FONT> *HiSax_getrev(<FONT COLOR="#298C52">const</FONT> <FONT COLOR="#298C52">char</FONT> *revision);
<FONT COLOR="#298C52">void</FONT> TeiNew(<FONT COLOR="#298C52">void</FONT>);
<FONT COLOR="#298C52">void</FONT> <A HREF="tei.c.shtml#TeiFree">TeiFree</A>(<FONT COLOR="#298C52">void</FONT>);
</BODY>

</HTML>
